### Hibernate 的持久化

#### 持久化类
>持久化:将内存中的对象保存到数据库中的过程就是持久化。
>持久化类:一个java对象与数据库中的表建立了映射关系，这个类在Hibernate中被称为持久化类

* 持久化类的编写规则
    1. 提供一个无参数的构造函数
    2. 提供私有属性，对私有属性提供set和get方法
    3. 对持久类提供一个唯一的标识ID，与数据库中表的主键对应
    4. 持久化中的属性尽量使用包装类型。因为基本数据类型，默认值是0，会产生歧义.
    5. 持久化类不要使用final进行修饰。
        >原因: 延迟加载本身是Hiberbnate一个优化的手段.返回的是一个代理对象(javassist可以对没有实现代理接口的类产生代理--使用了非常底层的字节码增强技术)。如果不能被继承，就不能产生代理对象,延迟加载也就失败了.此时load和get方法就一样了。

#### Hibernate 的主键生成策略  
* 主键的分类
    1. 自然主键:主键的本身就是表中的一个字段(实体中的一个具体的属性)，比如身份证号就可以作为一个自然主键
    2. 代理主键:主键本身不是实体中的一个具体属性，比如一个自增的主键ID
    3. 实际开发中尽量使用代理主键
* Hibernate的主键生成策略
    >在实际开发中一般不允许用户手动设置主键，一般将主键交给数据库，手动编写程序进行设置，在Hibernate中为了减少程序编写，提供了很多种的主键生成策略。

    1. increment Hibernate 中提供的自动增长机制，适用于short，int，long类型的主键。在单线程程序中使用。多线程的话会出错，没有increment标识
        1. 首先发送一条语句 select max(id) from tbl ,然后让id+1 作为下一个主键
    2.  identity 适用short int long 类型的主键，使用的是数据库底层的自动增加机制，会在表中增加auto_increment标识，适用于有自动增加机制的数据库(MySql,SqlServer),但是Oracle没有自动增长。
    3. sequence 使用short int long 类型的主键，采用的是序列的方式(Oracle 支持序列)，MySql就不支持序列
    4. uuid 适用于字符串类型主键。使用Hibernate中的随即方式生成主键。
    5. native 本地策略，可以在identity和sequence中切换
    6. assigned Hibernate 放弃外键的管理，需要手动编写程序或者用户自己设置。
    7. foreign 外部的，一对一的一种关联映射的情况下使用。